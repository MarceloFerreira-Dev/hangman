<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>Trigger Random</title>
       <!-- Added link to the jQuery Library -->
       <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
       <!-- Added a link to Bootstrap-->
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>
  <div class="jumbotron" display="flex" justify-content="center" align-items="center">

      <img src="https://marceloxerox.github.io/hangman/img/logo.png" alt="Banner" class="img-responsive">
    <h1 class="text-center"></h1>
        
        <div class="text-center">
      <!-- Here we have our button for start the game (#Start-button) -->
      <button id="Start-button" class="btn btn-primary btn-lg"><h1><span class="glyphicon glyphicon-play-circle"></span> Play!</h1></button>
    </div>
  </div>
  <div id="arena" class="container">
    <div class="row">
      <div class="col-sm-4">
      <!-- Set Hangman stage. -->  
        <img id="Hang-img" src="https://marceloxerox.github.io/hangman/img/hang.png" alt="Hang" width="300" height="420">  
      </div>
      <div class="col-sm-4">
        <div id="display"></div>
          <div id="buttons"></div>
          <div id="Guesses">
        </div>
      </div>
      <div class="col-sm-4">
        <button class="button-center" id="wordgen">Word generator</button>
        <h1 id="word" class="text-center">Word</h1>
        <h2 class="text-center"></h2>
      </div>
    </div>
  </div>
  <audio id="myAudio" autoplay controls>
    <source src="https://marceloxerox.github.io/hangman/Theme/KIT.mp3" type="audio/mpeg">
  </audio>
  <!-- Here we have div called "random-number" where our random number will go -->
  <h1 class="text-center" id="random-number"></h1>
  <script type="text/javascript">

  $("#arena").hide();
   var count = 1;
   var api = 'https://api.wordnik.com/v4/words.json/randomWord';
   var key = 'a2a73e7b926c924fad7001ca3111acd55af2ffabf50eb4ae5';
   var mySound;       // Audio variable
   var corpus = 1000; // higher = less complex words
   var def = true;    // only words with definitions ?
   var x = document.getElementById("myAudio"); 
   var word;          // Variable Word from API.
   var counter = 0;   // Variable for counting bad guesses

function getWord(type, c) {
    return $.get(
        api + 
        '?includePartOfSpeech=' + type +
        '&hasDictionaryDef=' + def +
        '&minCorpusCount=' + corpus + 
        '&api_key=' + key
    );    
}
function link(res) {
    var w = res[0].word;
    var upper = w.charAt(0).toUpperCase() + w.slice(1); 
    return '<a target = "_blank" href="https://www.wordnik.com/words/' 
        + w.toLowerCase() + '">' + upper + '</a>';
}
// Body background.
    document.body.style.backgroundColor = "rgb(0, 153, 153)";      
// Generates a new word
    $("#wordgen").on("click", function() {
// Creates an empty array which will be filled with underscore char and one space char "_ ".
      var wordArray = [];
// Get a random word from wordnick API.
    $.when(getWord('noun'), getWord('adjective'), getWord('noun'))
    .then(function(a, b, c) {
        var sentence = 
            link(a) + ' <small>of the</small> ' + 
            link(b) + ' ' + link(c);
         //$('h2').html(sentence);
         word = a[0].word;
         console.log(word);
         console.log(word.length);
      for (i = 0; i < word.length; i++){
         wordArray.push("_ ");
     };
         console.log(wordArray);
         $('h2').html(wordArray);
    })
    .fail(function() { alert('ERROR'); });

    $(".letter-button").on("click", function() {         
           $('h2').html(wordArray);
           var pos = 0;
           var wordPick = ($(this).attr("data-letter"));
           var letters = wordPick.toLowerCase();
           console.log(word);
           console.log(wordPick);
           pos = word.indexOf(letters);
           console.log(pos);
           console.log(counter);
           //alert("postion "+ pos);
            if(pos == -1){           
                  counter = counter + 1;
                  document.getElementById("Hang-img").src = "https://marceloxerox.github.io/hangman/img/hang"+ counter +".png";
                  $("#Guesses").html("<h3>Wrong Guesses: " + counter+"</h3>");
                  if(counter > 7){
                    counter = 0;
                    document.getElementById("Hang-img").src = "https://marceloxerox.github.io/hangman/img/hang7.png";
            }else {
              for(i = 0; i < word.length; i++){
               pos = word.indexOf(letters,i);
               //alert("postion "+ pos);
               wordArray[pos] = letters;
                 if(pos == -1){
                    break;
                 };
                };
                $('h2').html(wordArray);               
              };
            };
               console.log(wordArray);                         
               console.log(letters,pos,word);           
      });  
    });
    $("#Start-button").on("click", function() { 
        $("#arena").show();     
        document.getElementById("Hang-img").src = "https://marceloxerox.github.io/hangman/img/hang.png";
        $(document).ready(function() {
        var letters = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "_"];
        // DYNAMICALLY CREATE BUTTONS
        // 1. Create a for-loop to iterate through the letters array.
      for (var i = 0; i < letters.length; i++) {
        // Inside the loop...
        // Create a variable named "letterBtn" equal to $("<button>");
        var letterBtn = $("<button>");
        // Give each "letterBtn" the following classes: "letter-button" "letter" "letter-button-color".
        letterBtn.addClass("letter-button letter letter-button-color");
        // Give each "letterBtn" a data-attribute called "data-letter".
        letterBtn.attr("data-letter", letters[i]);
        // Give each "letterBtns" a text equal to "letters[i]".
        letterBtn.text(letters[i]);
        // Append each "letterBtn" to the "'buttons" div (provided).
        $("#buttons").append(letterBtn);
      };  
     });
    });
  </script>
</body>
</html>
